"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.handler = void 0;
const AWS = require("aws-sdk");
const client = new AWS.Rekognition();
const handler = async (event = {}) => {
    const key = event.Records[0].s3.object.key;
    console.log(key);
    const params = {
        SourceImage: {
            S3Object: {
                Bucket: process.env.BUCKET_NAME,
                Name: key
            }
        },
        TargetImage: {
            S3Object: {
                Bucket: process.env.BUCKET_NAME,
                Name: key
            }
        },
    };
    const response = await client.compareFaces(params).promise();
    try {
        return response;
    }
    catch (err) {
        console.log(err);
    }
    return;
};
exports.handler = handler;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVrb2dpdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInJla29naXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsK0JBQStCO0FBQy9CLE1BQU0sTUFBTSxHQUFHLElBQUksR0FBRyxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBRTlCLE1BQU0sT0FBTyxHQUFHLEtBQUssRUFBRSxRQUFhLEVBQUUsRUFBZ0IsRUFBRTtJQUMzRCxNQUFNLEdBQUcsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFBO0lBQzFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFFakIsTUFBTSxNQUFNLEdBQXdDO1FBQ2hELFdBQVcsRUFBRTtZQUNULFFBQVEsRUFBRTtnQkFDTixNQUFNLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXO2dCQUMvQixJQUFJLEVBQUUsR0FBRzthQUNaO1NBQ0o7UUFDRCxXQUFXLEVBQUU7WUFDVCxRQUFRLEVBQUU7Z0JBQ04sTUFBTSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVztnQkFDL0IsSUFBSSxFQUFFLEdBQUc7YUFDWjtTQUNKO0tBQ0osQ0FBQztJQUNGLE1BQU0sUUFBUSxHQUF5QyxNQUFNLE1BQU0sQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7SUFFbkcsSUFBSTtRQUNBLE9BQU8sUUFBUSxDQUFBO0tBQ2xCO0lBQ0QsT0FBTSxHQUFHLEVBQUU7UUFDUCxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0tBQ3BCO0lBQ0QsT0FBTztBQUNYLENBQUMsQ0FBQztBQTNCVyxRQUFBLE9BQU8sV0EyQmxCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQVdTIGZyb20gJ2F3cy1zZGsnO1xuY29uc3QgY2xpZW50ID0gbmV3IEFXUy5SZWtvZ25pdGlvbigpO1xuXG5leHBvcnQgY29uc3QgaGFuZGxlciA9IGFzeW5jIChldmVudDogYW55ID0ge30pOiBQcm9taXNlPGFueT4gPT4ge1xuICAgIGNvbnN0IGtleSA9IGV2ZW50LlJlY29yZHNbMF0uczMub2JqZWN0LmtleVxuICAgIGNvbnNvbGUubG9nKGtleSk7XG5cbiAgICBjb25zdCBwYXJhbXM6IEFXUy5SZWtvZ25pdGlvbi5Db21wYXJlRmFjZXNSZXF1ZXN0ID0ge1xuICAgICAgICBTb3VyY2VJbWFnZToge1xuICAgICAgICAgICAgUzNPYmplY3Q6IHtcbiAgICAgICAgICAgICAgICBCdWNrZXQ6IHByb2Nlc3MuZW52LkJVQ0tFVF9OQU1FLFxuICAgICAgICAgICAgICAgIE5hbWU6IGtleVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBUYXJnZXRJbWFnZToge1xuICAgICAgICAgICAgUzNPYmplY3Q6IHtcbiAgICAgICAgICAgICAgICBCdWNrZXQ6IHByb2Nlc3MuZW52LkJVQ0tFVF9OQU1FLFxuICAgICAgICAgICAgICAgIE5hbWU6IGtleVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH07XG4gICAgY29uc3QgcmVzcG9uc2U6IEFXUy5SZWtvZ25pdGlvbi5Db21wYXJlRmFjZXNSZXNwb25zZSA9IGF3YWl0IGNsaWVudC5jb21wYXJlRmFjZXMocGFyYW1zKS5wcm9taXNlKCk7XG5cbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gcmVzcG9uc2VcbiAgICB9XG4gICAgY2F0Y2goZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfVxuICAgIHJldHVybjtcbn07XG4iXX0=
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.handler = void 0;
const AWS = require("aws-sdk");
const client = new AWS.Rekognition();
exports.handler = async (event = {}) => {
    const key = event.Records[0].s3.object.key;
    console.log(key);
    const params = {
        SourceImage: {
            S3Object: {
                Bucket: process.env.BUCKET_NAME,
                Name: key
            }
        },
        TargetImage: {
            S3Object: {
                Bucket: process.env.BUCKET_NAME,
                Name: key
            }
        },
    };
    const response = await client.compareFaces(params).promise();
    try {
        return response;
    }
    catch (err) {
        console.log(err);
    }
    return;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVrb2dpdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInJla29naXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsK0JBQStCO0FBQy9CLE1BQU0sTUFBTSxHQUFHLElBQUksR0FBRyxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBRXhCLFFBQUEsT0FBTyxHQUFHLEtBQUssRUFBRSxRQUFhLEVBQUUsRUFBZ0IsRUFBRTtJQUMzRCxNQUFNLEdBQUcsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFBO0lBQzFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFFakIsTUFBTSxNQUFNLEdBQXdDO1FBQ2hELFdBQVcsRUFBRTtZQUNULFFBQVEsRUFBRTtnQkFDTixNQUFNLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXO2dCQUMvQixJQUFJLEVBQUUsR0FBRzthQUNaO1NBQ0o7UUFDRCxXQUFXLEVBQUU7WUFDVCxRQUFRLEVBQUU7Z0JBQ04sTUFBTSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVztnQkFDL0IsSUFBSSxFQUFFLEdBQUc7YUFDWjtTQUNKO0tBQ0osQ0FBQztJQUNGLE1BQU0sUUFBUSxHQUF5QyxNQUFNLE1BQU0sQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7SUFFbkcsSUFBSTtRQUNBLE9BQU8sUUFBUSxDQUFBO0tBQ2xCO0lBQ0QsT0FBTSxHQUFHLEVBQUU7UUFDUCxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0tBQ3BCO0lBRUQsT0FBTztBQUNYLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEFXUyBmcm9tICdhd3Mtc2RrJztcbmNvbnN0IGNsaWVudCA9IG5ldyBBV1MuUmVrb2duaXRpb24oKTtcblxuZXhwb3J0IGNvbnN0IGhhbmRsZXIgPSBhc3luYyAoZXZlbnQ6IGFueSA9IHt9KTogUHJvbWlzZTxhbnk+ID0+IHtcbiAgICBjb25zdCBrZXkgPSBldmVudC5SZWNvcmRzWzBdLnMzLm9iamVjdC5rZXlcbiAgICBjb25zb2xlLmxvZyhrZXkpO1xuXG4gICAgY29uc3QgcGFyYW1zOiBBV1MuUmVrb2duaXRpb24uQ29tcGFyZUZhY2VzUmVxdWVzdCA9IHtcbiAgICAgICAgU291cmNlSW1hZ2U6IHtcbiAgICAgICAgICAgIFMzT2JqZWN0OiB7XG4gICAgICAgICAgICAgICAgQnVja2V0OiBwcm9jZXNzLmVudi5CVUNLRVRfTkFNRSxcbiAgICAgICAgICAgICAgICBOYW1lOiBrZXlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgVGFyZ2V0SW1hZ2U6IHtcbiAgICAgICAgICAgIFMzT2JqZWN0OiB7XG4gICAgICAgICAgICAgICAgQnVja2V0OiBwcm9jZXNzLmVudi5CVUNLRVRfTkFNRSxcbiAgICAgICAgICAgICAgICBOYW1lOiBrZXlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9O1xuICAgIGNvbnN0IHJlc3BvbnNlOiBBV1MuUmVrb2duaXRpb24uQ29tcGFyZUZhY2VzUmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuY29tcGFyZUZhY2VzKHBhcmFtcykucHJvbWlzZSgpO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlXG4gICAgfVxuICAgIGNhdGNoKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH1cblxuICAgIHJldHVybjtcbn07XG4iXX0=